---
title: Import new posts from WordPress RSS feed
description: Create all the new posts using the data from some WordPress RSS feed
order: 0
---

This query imports all the new posts from a WordPress RSS feed, using the title, content and excerpt of the post.

The new posts are those created in the last 24 hs (configurable via variable). Execute this persisted query with a daily [WP-Cron automation task](/extensions-reference/automation#wp-cron) to automatically import all new posts from the other site.

Variable `$url` receives the URL of the WordPress post archive's RSS feed. It usually is the post archive URL + `"/feed/rss/?withoutcomments=1"`. Eg:

```apacheconf
https://wordpress.com/blog/feed/rss/?withoutcomments=1
```

```graphql
query GetPostsFromRSSFeedAndExportData(
  $url: URL!
) {
  _sendHTTPRequest(input: {
    url: $url,
    method: GET
  }) {
    body
    rssJSON: _strDecodeXMLAsJSON(
      xml: $__body
      alwaysArrayTagNames: [
        "item",
      ],
    )
      @underJSONObjectProperty(by: { path: "rss.channel.item" })
        @underEachArrayItem(
          passValueOnwardsAs: "item"
          affectDirectivesUnderPos: [1, 2]
        )
          @applyField(
            name: "_objectProperty"
            arguments: {
              object: $item
              by: { key: "title" }
            }
            passOnwardsAs: "title"
          )
          @applyField(
            name: "_objectProperty"
            arguments: {
              object: $item
              by: { key: "content:encoded" }
            }
            passOnwardsAs: "content"
          )
          @applyField(
            name: "_objectProperty"
            arguments: {
              object: $item
              by: { key: "description" }
            }
            passOnwardsAs: "excerpt"
          )

    # Fields to be imported
    content:  _objectProperty(
      object: $__rssJSON,
      by: {
        path: "rss.channel.item.content:encoded"
      }
    )
      @export(as: "content")

    excerpt:  _objectProperty(
      object: $__rssJSON,
      by: {
        path: "rss.channel.item.description"
      }
    )
      @export(as: "excerpt")

    title:  _objectProperty(
      object: $__rssJSON,
      by: {
        path: "rss.channel.item.title"
      }
    )
      @export(as: "title")
  }
}

mutation ImportPostFromWPRSSFeed
  @depends(on: "GetPostsFromRSSFeedAndExportData")
{
  createPost(input: {
    status: draft,
    contentAs: {
      html: $content
    },
    excerpt: $excerpt
    title: $title
  }) {
    status
    errors {
      __typename
      ...on ErrorPayload {
        message
      }
    }
    post {
      id
      slug
      date
      status

      content
      excerpt
      title
    }
  }
}
```
