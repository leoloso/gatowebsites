---
title: Internal GraphQL Server
description: "Execute GraphQL queries directly within your application, using PHP code."
order: 0
image: /images/thumbnails/extensions/internal-graphql-server.png
targetImages:
  - /images/icons/extensions/internal-graphql-server.svg
# @todo Replace the extension video!
video: /videos/GatoGraphQL-intro.mp4
shopURLs:
  dev: https://shop.gatographql.com/checkout/buy/4bcfb660-0346-4cb3-98d1-f2a1962a79c1
  defaultTier:
    yearly: "@todo"
    ltd: "@todo"
  tier1:
    yearly: "@todo"
    ltd: "@todo"
  tier2:
    yearly: "@todo"
    ltd: "@todo"
  tier3:
    yearly: "@todo"
    ltd: "@todo"
  tier4:
    yearly: "@todo"
    ltd: "@todo"
---

This extension installs an internal GraphQL Server, that can be invoked within your application, using PHP code.

The internal GraphQL server is accessed via class `GatoGraphQL\InternalGraphQLServer\GraphQLServer`, through these three methods:

- `executeQuery`: Execute a GraphQL query
- `executeQueryInFile`: Execute a GraphQL query contained in a (`.gql`) file
- `executePersistedQuery`: Execute a persisted GraphQL query (providing its ID as an int, or slug as a string) (the **Persisted Queries** extension is required)

These are the method signatures:

```php
namespace GatoGraphQL\InternalGraphQLServer;

use PoP\Root\HttpFoundation\Response;

class GraphQLServer {
  /**
   * Execute a GraphQL query
   */
  public static function executeQuery(
    string $query,
    array $variables = [],
    ?string $operationName = null,
    int|string|null $schemaConfigurationIDOrSlug = null,
  ): Response {
    // ...
  }


  /**
   * Execute a GraphQL query contained in a (`.gql`) file
   */
  public static function executeQueryInFile(
    string $file,
    array $variables = [],
    ?string $operationName = null,
    int|string|null $schemaConfigurationIDOrSlug = null,
  ): Response {
    // ...
  }


  /**
   * Execute a persisted GraphQL query (providing its ID as an int, or slug as a string)
   */
  public static function executePersistedQuery(
    string|int $persistedQueryIDOrSlug,
    array $variables = [],
    ?string $operationName = null
  ): Response {
    // ...
  }
}
```

To execute a GraphQL query and obtain the response content:

```php
use GatoGraphQL\InternalGraphQLServer\GraphQLServer;

// Provide the GraphQL query
$query = "{ ... }";

// Execute the query against the internal server
$response = GraphQLServer::executeQuery($query);

// Get the content and decode it
$responseContent = json_decode($response->getContent(), true);

// Access the data and errors from the response
$responseData = $responseContent["data"] ?? [];
$responseErrors = $responseContent["errors"] ?? [];
```
