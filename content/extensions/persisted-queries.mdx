---
title: Persisted Queries
description: "Expose GraphQL endpoints with a predefined response, similar to REST endpoints."
order: 0
image: /images/thumbnails/extensions/persisted-queries.png
targetImages:
  - /images/icons/extensions/persisted-queries.svg
# @todo Replace the extension video!
video: /videos/GatoGraphQL-intro.mp4
shopURLs:
  dev: https://shop.gatographql.com/checkout/buy/6b8f6a1e-4474-486f-9214-2cdb649c0bab
  defaultTier:
    yearly: "@todo"
    ltd: "@todo"
  tier1:
    yearly: "@todo"
    ltd: "@todo"
  tier2:
    yearly: "@todo"
    ltd: "@todo"
  tier3:
    yearly: "@todo"
    ltd: "@todo"
  tier4:
    yearly: "@todo"
    ltd: "@todo"
---

In a REST API, we create multiple endpoints, each returning a pre-defined set of data. In a GraphQL API, in contrast, we provide any query to a single endpoint, which returns exactly the requested data.

Persisted queries are normal GraphQL queries, however they are stored in the server and accessed under their own URL, thus emulating a REST endpoint. They provide the advantages from these two APIs, while avoiding their disadvantages:

| Advantages | Disadvantages |
| --- | --- |
| ✅ Accessed via `GET` or `POST` | ~~❌ Accessed only via `POST`~~ |
| ✅ Can be cached on the server or CDN | ~~❌ Needs to provide an extra layer in client-side just for caching~~ |
| ✅ It's secure: only intended data is exposed | ~~❌ Data is exposed to anyone, including malicious actors~~ |
| ✅ No under/over fetching of data, all data is retrieved in a single request | ~~❌ It can be slow, since the application may need several requests to retrieve all the data~~ |
| ✅ It enables rapid iteration of the project | ~~❌ It's tedious to create all the endpoints~~ |
| ✅ It can be self-documented | ~~❌ Producing documentation is mandatory~~ |
| ✅ It provides clients to create and publish the query | ~~❌ Publishing endpoints is done via code~~ |

<Image
  src="/assets/guides/upstream/persisted-query.png"
  width="1024"
  height="1850"
  alt="Persisted query editor"
  caption="Persisted query editor"
/>

Once the persisted query is published, we can execute it via its permalink.

The persisted query can be executed via the GraphiQL client, or also directly in the browser (since it is accessed via `GET`), and we will obtain the requested data, in JSON format:

<Image
  src="/assets/guides/upstream/persisted-query-execution.png"
  width="1024"
  height="940"
  alt="Executing a persisted in the browser"
  caption="Executing a persisted in the browser"
/>

The persisted queries can be managed via categories and hierarchies.

<Image
  src="/assets/guides/upstream/persisted-queries-page.png"
  width="1024"
  height="940"
  alt="Persisted queries page"
  caption="Persisted queries page"
/>