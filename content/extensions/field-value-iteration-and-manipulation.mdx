---
name: Field Value Iteration and Manipulation
description: "Iterate and manipulate the value elements of array and object fields."
# image: /assets/product-logos/GatoGraphQL-suki-extension.png
# order: 1500
category: 'Schema functionality'
# shopProductTestModeURL: https://shop.gatographql.com/checkout/buy/bb573e62-b274-464c-b01e-7817761ec47b
# shopProductURL: https://shop.gatographql.com/checkout/buy/ed659ee8-0f32-4741-a683-76f0b61b183d
# productPrices:
# - 24.99
# - 49.99
# - 99.99
# bundles:
# - automated-content-translation-and-sync-for-wordpress-multisite
# - better-wordpress-webhooks
# - easy-wordpress-bulk-transform-and-update
# - private-graphql-server-for-wordpress
# - responsible-wordpress-public-api
# - selective-content-import-export-and-sync-for-wordpress
# - simplest-wordpress-content-translation
# - tailored-wordpress-automator
# - unhindered-wordpress-email-notifications
# - versatile-wordpress-request-api
---

Addition of meta directives to the GraphQL schema, for iterating and manipulating the value elements of array and object fields:

1. `@underArrayItem`
2. `@underJSONObjectProperty`
3. `@underEachArrayItem`
4. `@underEachJSONObjectProperty`
5. `@objectClone`

`@underArrayItem` makes the nested directive be applied on a specific item from the array.

```graphql
query {
  posts {
    categoryNames
      @underArrayItem(index: 0)
        @strUpperCase
  }
}
```

...produces:

```json
{
  "data": {
    "posts": {
      "categoryNames": [
        "NEWS",
        "sports"
      ]
    }
  }
}
```

`@underJSONObjectProperty` makes the nested directive receive an entry from the queried JSON object.

```graphql
query {
  postData: _sendJSONObjectItemHTTPRequest(
    url: "https://newapi.getpop.org/wp-json/wp/v2/posts/1/?_fields=id,type,title,date"
  )
    @underJSONObjectProperty(by: { key: "type" })
      @strUpperCase
}
```

...produces:

```json
{
  "data": {
    "postData": {
      "id": 1,
      "date": "2019-08-02T07:53:57",
      "type": "POST",
      "title": {
        "rendered": "Hello world!"
      }
    }
  }
}
```

`@underEachArrayItem` iterates over the array items from some field in the queried entity, and executes the nested directive(s) on each of them.

```graphql
query {
  posts {
    id
    title
    categoryNames
    frenchCategoryNames: categoryNames
      @underEachArrayItem
        @strTranslate(
          from: "en",
          to: "fr"
        )
  }
}
```

...produces:

```json
{
  "data": {
    "posts": [
      {
        "id": 662,
        "title": "Explaining the privacy policy",
        "categoryNames": [
          "Not categorized"
        ],
        "frenchCategoryNames": [
          "Non classé"
        ]
      },
      {
        "id": 28,
        "title": "HTTP caching improves performance",
        "categoryNames": [
          "Advanced"
        ],
        "frenchCategoryNames": [
          "Avancé"
        ]
      },
      {
        "id": 25,
        "title": "Public or Private API mode, for extra security",
        "categoryNames": [
          "Resource",
          "Blog",
          "Advanced"
        ],
        "frenchCategoryNames": [
          "Ressource",
          "Blog",
          "Avancé"
        ]
      }
    ]
  }
}
```

`@underEachJSONObjectProperty` is similar to `@underEachArrayItem`, but operating on `JSONObject` elements.

```graphql
{
  _echo(
    value: {
      first: "hello",
      second: "world",
      third: null
    }
  )
    @underEachJSONObjectProperty
      @default(value: "")
}
```

...produces:

```json
{
  "data": {
    "_echo": {
      "first": "hello",
      "second": "world",
      "third": ""
    }
  }
}
```
